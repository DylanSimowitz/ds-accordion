'use strict';var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(exports,'__esModule',{value:!0});function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Fold=function(){function a(b){_classCallCheck(this,a),this.element=b,this.header=this.element.firstElementChild,this.panel=this.element.lastElementChild,this.state={open:!1}}return _createClass(a,[{key:'init',value:function init(){this.element.classList.add('accordion__fold'),this.panel.classList.add('accordion__panel'),this.panelHeight=this.panel.offsetHeight,this.panel.style.height='0px',this.header.classList.add('accordion__header'),this.header.setAttribute('aria-expanded',!1),this.element.addEventListener('open',this.onOpen.bind(this)),this.element.addEventListener('close',this.onClose.bind(this)),this.header.addEventListener('click',this.onClick.bind(this)),this.events={open:new CustomEvent('open',{detail:{fold:this},bubbles:!0}),close:new CustomEvent('close',{detail:{fold:this},bubbles:!0})}}},{key:'onOpen',value:function onOpen(){this.expand()}},{key:'onClose',value:function onClose(){this.collapse()}},{key:'onClick',value:function onClick(){this.open=!this.state.open}},{key:'collapse',value:function collapse(){this.element.classList.remove('accordion__fold--expanded'),this.header.setAttribute('aria-expanded',!1),this.panel.classList.remove('accordion__panel--expanded'),this.panel.style.height='0px'}},{key:'expand',value:function expand(){this.element.classList.add('accordion__fold--expanded'),this.header.setAttribute('aria-expanded',!0),this.panel.classList.add('accordion__panel--expanded'),this.panel.style.height=this.panelHeight+'px'}},{key:'open',get:function get(){return this.state.open},set:function set(b){this.state.open=b,this.state.open?this.element.dispatchEvent(this.events.open):this.element.dispatchEvent(this.events.close)}}]),a}(),Accordion=function(){function a(b){_classCallCheck(this,a),this.element=document.querySelector(b),this.folds=[],this.state={}}return _createClass(a,[{key:'init',value:function init(){this.createFolds(),this.element.addEventListener('open',this.onOpen.bind(this))}},{key:'onOpen',value:function onOpen(b){this.folds.filter(function(c){return c===b.detail.fold||(c.open=!1,!1)})}},{key:'createFolds',value:function createFolds(){for(var c,b=0;b<this.element.children.length;b+=1)c=new Fold(this.element.children[b]),c.init(),this.folds.push(c)}}]),a}();exports.default=Accordion;
